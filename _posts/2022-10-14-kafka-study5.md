---
layout: post
title:  "[study] kafka - 4"
date:   2022-10-14 18:20:21 +0900
categories: kafka
---

> 카프카 스터디 5

## 카프카 스트림즈
- 토픽에 적재된 데이터를 실시간으로 변환하여 다른 토픽에 적재하는 라이브러리
- 카프카에서 공식적으로 지원하는 라이브러리
- 카프카 클러스터를 운영하면서 실시간 스트림 처리를 해야하는 필요성이 있다면, 카프카 스트림즈 어플리케이션을 개발하는 것이 좋다.

### 스트림즈를 사용해야하는 이유
- 다양한 기능을 스트림즈DSL로 제공하여 기능을 확장할 수 있다.
- 컨슈머와 프로듀서를 조합하여 스트림즈가 제공하는 기능과 유사하게 만들 수 있다.
    - 하지만 장애 허용 시스템등의 특징들은 컨슈머와 프로듀서만으로 조합하기 완벽하게 구현하기 힘들다.

### 스트림즈 내부구조
- 스트림즈 어플리케이션은 내부적으로 스레드를 1개 이상 생성할 수 있으며, 스레드는 1개 이상의 테스크를 가진다.
- 스트림즈의 `테스크`는 스트림즈 어플리케이션을 실행하면 데이터 처리 최소 단위이다.

### 토폴로지
- 2개 이상의 노드들과 선으로 이루어진 집합
- 카프카 스트림즈는 트리형 토폴로지
- 토폴로지를 이루는 노드 하나를 프로세서, 노드와 노드를 이은 선은 스트림이라고 부른다.
    - 소스프로세서: 데이터를 처리하기 위해 최초로 선언(데이터를 가져오는 역할)
    - 스트림 프로세스: 데이터를 변환 하는 역할
    - 싱크 프로세서: 카프카 토픽으로 저장하는 역할, 스트림즈로 처리된 데이터의 최종 종착지 

### 스트림즈 DSL, 프로세서 API
- 스트림즈 DSL
    - 스트림 프로세싱에서 쓰일만한 다양한 기능들을 자체 API로 변환 로직을 어렵지 않게 개발할 수 있다.
    - 메시지 값을 기반으로 토픽 분기처리
    - 지난 10분간 들어온 데이터의 개수 집계
- 프로세서 API 
    - 스트림즈 DSL로 구현되지 않는 것들을 제공
    - 메시지 값의 종류에 따라 토픽을 가변적으로 전송
    - 일정한 시간 간격으로 데이터 처리

## reference
- https://www.inflearn.com/course/%EC%95%84%ED%8C%8C%EC%B9%98-%EC%B9%B4%ED%94%84%EC%B9%B4-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D